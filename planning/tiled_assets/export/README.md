# Tiled Asset Export

Transparent tile PNGs and Tiled-compatible Wang set autotiling rules for the **dungeon-mode** and **dungeon-437** tilesets.

Generated by `scripts/export_tiled_assets.py`.

## Directory Structure

```
export/
├── dungeon_mode/
│   ├── all_tiles/              # 256 transparent 8x8 PNGs
│   └── groups/                 # Wall groups with autotiling rules
│       ├── single_line_wall_group/
│       ├── wall_group_round_fillings/
│       ├── vertical_double_wall_group/
│       ├── 3d_like_wall_group/
│       ├── stripe_streaks_wall_group/
│       └── minimap_wall_group/
├── dungeon_437/
│   ├── all_tiles/              # 256 transparent 8x8 PNGs
│   └── groups/
│       ├── single_line_wall_group/
│       ├── double_line_wall_group/
│       ├── mixed_2v1h_wall_group/
│       └── mixed_1v2h_wall_group/
├── metadata/
│   ├── group_catalog.json      # Master index of all groups
│   └── verification_report.json
└── README.md
```

Each wall group folder contains:
- `tiles/` — Individual transparent PNGs for the group's source tiles
- `tileset.png` — Composite horizontal strip (all 16 mask variants in one row)
- `tileset.tsj` — Tiled tileset JSON with embedded Wang set rules
- `group_info.json` — Metadata: tile IDs, mask assignments, usage notes

## Importing into Tiled

### Step 1: Add the tileset

1. Open your Tiled map (or create a new one with 8x8 tile size)
2. Go to **Map → Add External Tileset...**
3. Browse to a group folder and select `tileset.tsj`
4. The tileset will appear in the Tilesets panel with the Wang set pre-configured

### Step 2: Use the terrain brush

1. Select the **Terrain Brush** tool (keyboard shortcut: `T`)
2. In the Tilesets panel, click the **Wang Sets** tab (terrain icon)
3. Select the wall group's Wang set (e.g., "Single Line Wall Group")
4. Select the "Wall" terrain color
5. Paint walls on your map — Tiled automatically picks the correct tile for each position based on neighbor connectivity

### Wang Set Type

All groups use **edge** type Wang sets. This means connectivity is determined by shared edges between tiles:
- Two adjacent tiles both marked "Wall" on their shared edge will connect
- The terrain brush handles corners, tees, crosses, and straights automatically

### Understanding the 16-Mask System

Each tile covers one of 16 connectivity masks (4 directions × 2 states):

| Mask | Dirs | Shape | Description |
|------|------|-------|-------------|
| 0 | — | Isolated | No connections |
| 1 | N | End cap | Dead end pointing north |
| 2 | E | End cap | Dead end pointing east |
| 3 | NE | Corner | Bottom-left bend |
| 4 | S | End cap | Dead end pointing south |
| 5 | NS | Straight | Vertical corridor |
| 6 | ES | Corner | Top-left bend |
| 7 | NES | Tee | Right-facing T-junction |
| 8 | W | End cap | Dead end pointing west |
| 9 | NW | Corner | Bottom-right bend |
| 10 | EW | Straight | Horizontal corridor |
| 11 | NEW | Tee | Upward-facing T-junction |
| 12 | SW | Corner | Top-right bend |
| 13 | NSW | Tee | Left-facing T-junction |
| 14 | ESW | Tee | Downward-facing T-junction |
| 15 | NESW | Cross | Four-way intersection |

## Wall Group Descriptions

### dungeon_mode

| Group | Style | Best For |
|-------|-------|----------|
| **single_line_wall_group** | Classic thin single-line box drawing | Standard dungeon walls, corridors |
| **wall_group_round_fillings** | Double-line box drawing with rounded feel | Fortified walls, castle interiors |
| **vertical_double_wall_group** | Mixed: double vertical + single horizontal | Tall/reinforced vertical passages |
| **3d_like_wall_group** | Mixed: single vertical + double horizontal | Wide horizontal corridors |
| **stripe_streaks_wall_group** | Diagonal stripe/halftone fill patterns | Damaged walls, terrain boundaries |
| **minimap_wall_group** | Thin edge lines and wedge corners | Minimap overlay, HUD wall indicators |

### dungeon_437

| Group | Style | Best For |
|-------|-------|----------|
| **single_line_wall_group** | CP437 single-line box drawing | Standard ASCII dungeon walls |
| **double_line_wall_group** | CP437 double-line box drawing | Fortified/highlighted walls |
| **mixed_2v1h_wall_group** | Double vertical + single horizontal | Structural variation |
| **mixed_1v2h_wall_group** | Single vertical + double horizontal | Structural variation |

## Regenerating

```bash
python3 scripts/export_tiled_assets.py
# Or with custom source paths:
python3 scripts/export_tiled_assets.py --dm-src /path/to/dungeon-mode.png --d437-src /path/to/dungeon-437.png
```

Requires Python 3.10+ and Pillow.
